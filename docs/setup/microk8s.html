<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
    <title>microk8s - Kalaxy2 MicroK8s Cluster</title>
    <meta name="description" content="Arm64/Amd64 cluster research">
    <meta name="author" content="Don Buddenbaum">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <link rel="icon" href="../themes/daux/img/favicon-blue.png" type="image/x-icon">

    <!-- Mobile -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- JS -->
    <script>
        window.base_url = "../";
        document.documentElement.classList.remove('no-js');
    </script>

    <!-- Font -->
    
    <!-- CSS -->
            <link href='../themes/daux/css/theme-blue.min.css' rel='stylesheet' type='text/css'>
            <link href='../daux_libraries/search.css' rel='stylesheet' type='text/css'>
    </head>
<body class="">
    <div class="Columns content">
    <aside class="Columns__left Collapsible">
        <button type="button" class="Button Collapsible__trigger" aria-controls="sidebar_content" aria-expanded="false" aria-label="Toggle navigation">
            <span class="Collapsible__trigger__bar"></span>
            <span class="Collapsible__trigger__bar"></span>
            <span class="Collapsible__trigger__bar"></span>
        </button>

        <a class="Brand" href="../index.html">Kalaxy2 MicroK8s Cluster</a>

    <form role='search' action="/" method="get" class="Search" id="search_form">
        <label for="search_input">
            <span class='u-visuallyHidden'>Search</span>
        </label>
        <input
            type="search"
            id="search_input"
            class="Search__field"
            placeholder="Search..."
            aria-label="Search..."
            autocomplete="on"
            results=25
            autosave=text_search
        >
        <label>
            <input type="submit" class='u-visuallyHidden' />
            <span class='u-visuallyHidden'>Search...</span>
            <svg class="Search__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 451 451">
                <path d="M447.05 428l-109.6-109.6c29.4-33.8 47.2-77.9 47.2-126.1C384.65 86.2 298.35 0 192.35 0 86.25 0 .05 86.3.05 192.3s86.3 192.3 192.3 192.3c48.2 0 92.3-17.8 126.1-47.2L428.05 447c2.6 2.6 6.1 4 9.5 4s6.9-1.3 9.5-4c5.2-5.2 5.2-13.8 0-19zM26.95 192.3c0-91.2 74.2-165.3 165.3-165.3 91.2 0 165.3 74.2 165.3 165.3s-74.1 165.4-165.3 165.4c-91.1 0-165.3-74.2-165.3-165.4z"/>
            </svg>
        </label>
    </form>

        <div class="Collapsible__content" id="sidebar_content">
            <!-- Navigation -->
            <ul class='Nav'>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>ai</a><ul class='Nav'>
<li class='Nav__item '><a href="../ai/convolutional_neural_network.html">convolutional neural network</a></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>jupyter tensorflow</a><ul class='Nav'>
<li class='Nav__item '><a href="../ai/jupyter_tensorflow/jupyter_tensorflow.html">jupyter tensorflow</a></li></ul></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>language models</a><ul class='Nav'>
<li class='Nav__item '><a href="../ai/language_models/ollama.html">ollama</a></li></ul></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>ml</a><ul class='Nav'>
<li class='Nav__item '><a href="../ai/ml/mathematics.html">mathematics</a></li></ul></li>
<li class='Nav__item '><a href="../ai/neural_network.html">neural network</a></li>
<li class='Nav__item '><a href="../ai/ollama_server.html">ollama server</a></li>
<li class='Nav__item '><a href="../ai/openai.html">openai</a></li>
<li class='Nav__item '><a href="../ai/openwebUI.html">openwebUI</a></li>
<li class='Nav__item '><a href="../ai/private_copilot.html">private copilot</a></li>
<li class='Nav__item '><a href="../ai/search.html">search</a></li>
<li class='Nav__item '><a href="../ai/usecases.html">usecases</a></li>
<li class='Nav__item '><a href="../ai/voice.html">voice</a></li></ul></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>ansible</a><ul class='Nav'>
<li class='Nav__item '><a href="../ansible/ansible_automation.html">ansible automation</a></li>
<li class='Nav__item '><a href="../ansible/microk8s_setup.html">microk8s setup</a></li>
<li class='Nav__item '><a href="../ansible/storage.html">storage</a></li></ul></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>apis</a><ul class='Nav'>
<li class='Nav__item '><a href="../apis/apidog.html">apidog</a></li>
<li class='Nav__item '><a href="../apis/design_patterns.html">design patterns</a></li>
<li class='Nav__item '><a href="../apis/management.html">management</a></li>
<li class='Nav__item '><a href="../apis/microks.html">microks</a></li>
<li class='Nav__item '><a href="../apis/postman.html">postman</a></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>web services</a><ul class='Nav'>
<li class='Nav__item '><a href="../apis/web_services/soap.html">soap</a></li>
<li class='Nav__item '><a href="../apis/web_services/webservices.html">webservices</a></li>
<li class='Nav__item '><a href="../apis/web_services/wsdl.html">wsdl</a></li></ul></li></ul></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>automation</a><ul class='Nav'>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>argocd</a><ul class='Nav'>
<li class='Nav__item '><a href="../automation/argocd/argocd.html">argocd</a></li>
<li class='Nav__item '><a href="../automation/argocd/argocd_image_updater.html">argocd image updater</a></li></ul></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>bpms</a><ul class='Nav'>
<li class='Nav__item '><a href="../automation/bpms/activiti.html">activiti</a></li></ul></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>github</a><ul class='Nav'>
<li class='Nav__item '><a href="../automation/github/actions.html">actions</a></li>
<li class='Nav__item '><a href="../automation/github/settings.html">settings</a></li></ul></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>helm</a><ul class='Nav'>
<li class='Nav__item '><a href="../automation/helm/helm.html">helm</a></li></ul></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>microk8s</a><ul class='Nav'>
<li class='Nav__item '><a href="../automation/microk8s/microk8s_add_ons.html">microk8s add ons</a></li></ul></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>slack</a><ul class='Nav'>
<li class='Nav__item '><a href="../automation/slack/slack.html">slack</a></li></ul></li></ul></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>cicd</a><ul class='Nav'>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>argo gitsctions crossplane</a><ul class='Nav'>
<li class='Nav__item '><a href="../cicd/argo_gitsctions_crossplane/implementation.html">implementation</a></li></ul></li>
<li class='Nav__item '><a href="../cicd/argocd.html">argocd</a></li>
<li class='Nav__item '><a href="../cicd/automation.html">automation</a></li>
<li class='Nav__item '><a href="../cicd/jenkins_argocd.html">jenkins argocd</a></li>
<li class='Nav__item '><a href="../cicd/maven.html">maven</a></li>
<li class='Nav__item '><a href="../cicd/testing.html">testing</a></li></ul></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>cloud</a><ul class='Nav'>
<li class='Nav__item '><a href="../cloud/next_cloud.html">next cloud</a></li></ul></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>data engineering</a><ul class='Nav'>
<li class='Nav__item '><a href="../data_engineering/deltalake.html">deltalake</a></li>
<li class='Nav__item '><a href="../data_engineering/mageAI.html">mageAI</a></li>
<li class='Nav__item '><a href="../data_engineering/pdfparsing.html">pdfparsing</a></li>
<li class='Nav__item '><a href="../data_engineering/pipelines.html">pipelines</a></li></ul></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>databases</a><ul class='Nav'>
<li class='Nav__item '><a href="../databases/chromadb.html">chromadb</a></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>clickhouse</a><ul class='Nav'>
<li class='Nav__item '><a href="../databases/clickhouse/docker.html">docker</a></li>
<li class='Nav__item '><a href="../databases/clickhouse/documentation.html">documentation</a></li>
<li class='Nav__item '><a href="../databases/clickhouse/kubernetes_operator.html">kubernetes operator</a></li></ul></li>
<li class='Nav__item '><a href="../databases/cockroachDB.html">cockroachDB</a></li>
<li class='Nav__item '><a href="../databases/faiss.html">faiss</a></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>iris</a><ul class='Nav'>
<li class='Nav__item '><a href="../databases/iris/restapi.html">restapi</a></li></ul></li>
<li class='Nav__item '><a href="../databases/mongodb.html">mongodb</a></li>
<li class='Nav__item '><a href="../databases/mysql.html">mysql</a></li>
<li class='Nav__item '><a href="../databases/options.html">options</a></li>
<li class='Nav__item '><a href="../databases/performant_datamodels.html">performant datamodels</a></li>
<li class='Nav__item '><a href="../databases/starrocks.html">starrocks</a></li></ul></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>etl</a><ul class='Nav'>
<li class='Nav__item '><a href="../etl/document_parsing.html">document parsing</a></li>
<li class='Nav__item '><a href="../etl/mage_etl.html">mage etl</a></li></ul></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>file system</a><ul class='Nav'>
<li class='Nav__item '><a href="../file_system/backup.html">backup</a></li>
<li class='Nav__item '><a href="../file_system/ceph.html">ceph</a></li>
<li class='Nav__item '><a href="../file_system/crd.html">crd</a></li>
<li class='Nav__item '><a href="../file_system/deltalake_vs_parquet.html">deltalake vs parquet</a></li>
<li class='Nav__item '><a href="../file_system/longhorn.html">longhorn</a></li>
<li class='Nav__item '><a href="../file_system/minio.html">minio</a></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>nfs</a><ul class='Nav'>
<li class='Nav__item '><a href="../file_system/nfs/nfs.html">nfs</a></li>
<li class='Nav__item '><a href="../file_system/nfs/nfs_csi.html">nfs-csi</a></li></ul></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>object storage</a><ul class='Nav'>
<li class='Nav__item '><a href="../file_system/object_storage/minio.html">minio</a></li></ul></li>
<li class='Nav__item '><a href="../file_system/openebs.html">openebs</a></li>
<li class='Nav__item '><a href="../file_system/rook_ceph.html">rook ceph</a></li>
<li class='Nav__item '><a href="../file_system/samba.html">samba</a></li></ul></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>generativeAI</a><ul class='Nav'>
<li class='Nav__item '><a href="../generativeAI/agent.html">agent</a></li>
<li class='Nav__item '><a href="../generativeAI/buildllm.html">buildllm</a></li>
<li class='Nav__item '><a href="../generativeAI/chatbot_langchain.html">chatbot langchain</a></li>
<li class='Nav__item '><a href="../generativeAI/chatbot_langgraph.html">chatbot langgraph</a></li>
<li class='Nav__item '><a href="../generativeAI/chatbot_ollama.html">chatbot ollama</a></li>
<li class='Nav__item '><a href="../generativeAI/chunking.html">chunking</a></li>
<li class='Nav__item '><a href="../generativeAI/cloudflare_workerAI.html">cloudflare workerAI</a></li>
<li class='Nav__item '><a href="../generativeAI/contianerize.html">contianerize</a></li>
<li class='Nav__item '><a href="../generativeAI/embeddings.html">embeddings</a></li>
<li class='Nav__item '><a href="../generativeAI/evaluation.html">evaluation</a></li>
<li class='Nav__item '><a href="../generativeAI/gpu.html">gpu</a></li>
<li class='Nav__item '><a href="../generativeAI/jupyter.html">jupyter</a></li>
<li class='Nav__item '><a href="../generativeAI/llm.html">llm</a></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>llm services</a><ul class='Nav'>
<li class='Nav__item '><a href="../generativeAI/llm_services/search.html">search</a></li></ul></li>
<li class='Nav__item '><a href="../generativeAI/open_source_solution.html">open source solution</a></li>
<li class='Nav__item '><a href="../generativeAI/productionreadyLLM.html">productionreadyLLM</a></li>
<li class='Nav__item '><a href="../generativeAI/prometheus_llm.html">prometheus llm</a></li>
<li class='Nav__item '><a href="../generativeAI/prompt_engineering.html">prompt engineering</a></li>
<li class='Nav__item '><a href="../generativeAI/rag.html">rag</a></li>
<li class='Nav__item '><a href="../generativeAI/servings.html">servings</a></li>
<li class='Nav__item '><a href="../generativeAI/similarity.html">similarity</a></li>
<li class='Nav__item '><a href="../generativeAI/specklebot.html">specklebot</a></li>
<li class='Nav__item '><a href="../generativeAI/vector.html">vector</a></li></ul></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>homelab</a><ul class='Nav'>
<li class='Nav__item '><a href="../homelab/cloudflare.html">cloudflare</a></li>
<li class='Nav__item '><a href="../homelab/no_ip.html">no-ip</a></li>
<li class='Nav__item '><a href="../homelab/squarespace.html">squarespace</a></li></ul></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>iac</a><ul class='Nav'>
<li class='Nav__item '><a href="../iac/pulumi.html">pulumi</a></li></ul></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>id auth</a><ul class='Nav'>
<li class='Nav__item '><a href="../id_auth/basic_auth.html">basic auth</a></li>
<li class='Nav__item '><a href="../id_auth/zitadel.html">zitadel</a></li></ul></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>ideas</a><ul class='Nav'>
<li class='Nav__item '><a href="../ideas/AI_ideas.html">AI ideas</a></li>
<li class='Nav__item '><a href="../ideas/sources.html">sources</a></li></ul></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>machine learning</a><ul class='Nav'>
<li class='Nav__item '><a href="../machine_learning/ml_models.html">ml models</a></li></ul></li>
<li class='Nav__item '><a href="../microk8s.html">microk8s</a></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>observability</a><ul class='Nav'>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>grafana</a><ul class='Nav'>
<li class='Nav__item '><a href="../observability/grafana/grafana.html">grafana</a></li></ul></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>monitoring</a><ul class='Nav'>
<li class='Nav__item '><a href="../observability/monitoring/k8s.html">k8s</a></li>
<li class='Nav__item '><a href="../observability/monitoring/nvidia_gpu.html">nvidia gpu</a></li></ul></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>prometheus</a><ul class='Nav'>
<li class='Nav__item '><a href="../observability/prometheus/prometheus.html">prometheus</a></li></ul></li></ul></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>operations</a><ul class='Nav'>
<li class='Nav__item '><a href="../operations/crossplane.html">crossplane</a></li>
<li class='Nav__item '><a href="../operations/hooks.html">hooks</a></li>
<li class='Nav__item '><a href="../operations/monitor_gpu.html">monitor gpu</a></li>
<li class='Nav__item '><a href="../operations/monitorllm.html">monitorllm</a></li>
<li class='Nav__item '><a href="../operations/operations.html">operations</a></li>
<li class='Nav__item '><a href="../operations/operators.html">operators</a></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>policy</a><ul class='Nav'>
<li class='Nav__item '><a href="../operations/policy/gatekeeper.html">gatekeeper</a></li></ul></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>registries</a><ul class='Nav'>
<li class='Nav__item '><a href="../operations/registries/ghcrIO.html">ghcrIO</a></li></ul></li>
<li class='Nav__item '><a href="../operations/shell_operator_demo.html">shell-operator-demo</a></li>
<li class='Nav__item '><a href="../operations/shell_operator.html">shell operator</a></li></ul></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>programming</a><ul class='Nav'>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>java</a><ul class='Nav'>
<li class='Nav__item '><a href="../programming/java/java.html">java</a></li>
<li class='Nav__item '><a href="../programming/java/knotes.html">knotes</a></li>
<li class='Nav__item '><a href="../programming/java/spring.html">spring</a></li>
<li class='Nav__item '><a href="../programming/java/springcloud.html">springcloud</a></li>
<li class='Nav__item '><a href="../programming/java/swagger.html">swagger</a></li>
<li class='Nav__item '><a href="../programming/java/webservices.html">webservices</a></li></ul></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>nodejs</a><ul class='Nav'>
<li class='Nav__item '><a href="../programming/nodejs/face_recognition.html">face recognition</a></li>
<li class='Nav__item '><a href="../programming/nodejs/frameworks.html">frameworks</a></li>
<li class='Nav__item '><a href="../programming/nodejs/node.html">node</a></li></ul></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>playgrounds</a><ul class='Nav'>
<li class='Nav__item '><a href="../programming/playgrounds/kllrcoda.html">kllrcoda</a></li></ul></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>python</a><ul class='Nav'>
<li class='Nav__item '><a href="../programming/python/django_cicd_ecom_k8s.html">django cicd ecom k8s</a></li>
<li class='Nav__item '><a href="../programming/python/environment.html">environment</a></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>frameworks</a><ul class='Nav'>
<li class='Nav__item '><a href="../programming/python/frameworks/click.html">click</a></li>
<li class='Nav__item '><a href="../programming/python/frameworks/django.html">django</a></li></ul></li>
<li class='Nav__item '><a href="../programming/python/nicegui.html">nicegui</a></li>
<li class='Nav__item '><a href="../programming/python/pollapp.html">pollapp</a></li>
<li class='Nav__item '><a href="../programming/python/pyenv.html">pyenv</a></li>
<li class='Nav__item '><a href="../programming/python/solution_references.html">solution references</a></li>
<li class='Nav__item '><a href="../programming/python/streamlit.html">streamlit</a></li></ul></li></ul></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>project management</a><ul class='Nav'>
<li class='Nav__item '><a href="../project_management/open_project.html">open project</a></li></ul></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>references</a><ul class='Nav'>
<li class='Nav__item '><a href="../references/glossary.html">glossary</a></li></ul></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>remove</a><ul class='Nav'>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>microk8s</a><ul class='Nav'>
<li class='Nav__item '><a href="../remove/microk8s/microk8s_node.html">microk8s node</a></li></ul></li></ul></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>repositories</a><ul class='Nav'>
<li class='Nav__item '><a href="../repositories/generativeAI.html">generativeAI</a></li></ul></li>
<li class='Nav__item Nav__item--open has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>setup</a><ul class='Nav'>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>argocd</a><ul class='Nav'>
<li class='Nav__item '><a href="../setup/argocd/argocd.html">argocd</a></li></ul></li>
<li class='Nav__item Nav__item--active'><a href="../setup/microk8s.html">microk8s</a></li>
<li class='Nav__item '><a href="../setup/minio.html">minio</a></li>
<li class='Nav__item '><a href="../setup/notes.html">notes</a></li>
<li class='Nav__item '><a href="../setup/podnodeselector.html">podnodeselector</a></li>
<li class='Nav__item '><a href="../setup/README.html">README</a></li>
<li class='Nav__item '><a href="../setup/rpi_usb_ubuntu.html">rpi usb ubuntu</a></li></ul></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>standards</a><ul class='Nav'>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>apis</a><ul class='Nav'>
<li class='Nav__item '><a href="../standards/apis/rest_standards.html">rest standards</a></li></ul></li></ul></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>usecases</a><ul class='Nav'>
<li class='Nav__item '><a href="../usecases/nutrition_image_recognition.html">nutrition image recognition</a></li></ul></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>utilities</a><ul class='Nav'>
<li class='Nav__item '><a href="../utilities/justfile.html">justfile</a></li>
<li class='Nav__item '><a href="../utilities/k8s_cmd_ref.html">k8s cmd ref</a></li>
<li class='Nav__item '><a href="../utilities/k8s_troubleshooting.html">k8s troubleshooting</a></li>
<li class='Nav__item '><a href="../utilities/k9s.html">k9s</a></li>
<li class='Nav__item '><a href="../utilities/kube_shark.html">kube shark</a></li>
<li class='Nav__item '><a href="../utilities/pvc_backup.html">pvc backup</a></li>
<li class='Nav__item '><a href="../utilities/taskfile.html">taskfile</a></li>
<li class='Nav__item '><a href="../utilities/utilities.html">utilities</a></li></ul></li>
<li class='Nav__item  has-children'><a href="#" class="Nav__item__link Nav__item__link--nopage"><i class="Nav__arrow">&nbsp;</i>websites generation</a><ul class='Nav'>
<li class='Nav__item '><a href="../websites_generation/dauxio_kalaxy2.html">dauxio kalaxy2</a></li>
<li class='Nav__item '><a href="../websites_generation/resume.html">resume</a></li></ul></li></ul>
            <div class="Links">
                            </div>

                            <div class="CodeToggler">
                    <hr/>
                    <label class="Checkbox">Show Code Blocks                        <input type="checkbox" class="CodeToggler__button--main" checked="checked"/>
                        <div class="Checkbox__indicator"></div>
                    </label>
                </div>
            
            <div class="DarkModeToggler">
                <hr/>
                <label class="Checkbox">Dark Mode                    <input type="checkbox" class="ColorMode__button" />
                    <div class="Checkbox__indicator"></div>
                </label>
            </div>

                
                        </div>
    </aside>
    <div class="Columns__right">
        <div class="Columns__right__content">
            <div class="doc_content">
                <article class="Page">

    <div class="Page__header">
        <h1><a href="../setup/microk8s.html">setup</a> <svg class="Page__header--separator" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 477.175 477.175"><path d="M360.73 229.075l-225.1-225.1c-5.3-5.3-13.8-5.3-19.1 0s-5.3 13.8 0 19.1l215.5 215.5-215.5 215.5c-5.3 5.3-5.3 13.8 0 19.1 2.6 2.6 6.1 4 9.5 4 3.4 0 6.9-1.3 9.5-4l225.1-225.1c5.3-5.2 5.3-13.8.1-19z"/></svg> <a href="../setup/microk8s.html">microk8s</a></h1>
                <span class="ModifiedDate">
            September 2, 2024 at 8:20 PM        </span>
                    </div>

    <div class="s-content">
        <div class="TableOfContentsContainer">
    <h4 class="TableOfContentsContainer__title">Table of Contents</h4>
    <div class="TableOfContentsContainer__content">
        <ul class="TableOfContents">
<li>
<a href="#setup-microk8s">Setup MicroK8s</a>
<ul>
<li>
<a href="#reference">Reference</a>
</li>
<li>
<a href="#setup">Setup</a>
<ul>
<li>
<a href="#arm64-init">ARM64 Init</a>
<ul>
<li>
<a href="#02-17-24-10-43pm-donbuddenbaum-donbs-imac-documents-kalaxy2-cloud-init-setup-main">#( 02/17/24@10:43PM )( donbuddenbaum@donbs-imac ):~/Documents/Kalaxy2/cloud-init-setup@main✔</a>
</li>
</ul>
</li>
<li>
<a href="#node">Node</a>
<ul>
<li>
<a href="#pi-arm64-05-sudo-passwd-dbuddenbaum">pi@arm64-05:~$ sudo passwd dbuddenbaum</a>
</li>
<li>
<a href="#02-18-24-1-00am-donbuddenbaum-donbs-imac-documents-kalaxy2-cloud-init-setup-main">#( 02/18/24@ 1:00AM )( donbuddenbaum@donbs-imac ):~/Documents/Kalaxy2/cloud-init-setup@main✗✗✗</a>
</li>
<li>
<a href="#dbuddenbaum-donb-ms7821-ssh-keygen-f-home-dbuddenbaum-ssh-known-hosts-r-192-168-2-51">dbuddenbaum@donb-ms7821:~$ ssh-keygen -f “/home/dbuddenbaum/.ssh/known_hosts” -R “192.168.2.51”</a>
</li>
<li>
<a href="#dbuddenbaum-arm64-05-sudo-snap-install-microk8s-classic-channel-1-29-stable">dbuddenbaum@arm64-05:~$ sudo snap install microk8s –classic –channel=1.29/stable</a>
</li>
<li>
<a href="#buddenbaum-arm64-01-sudo-microk8s-add-node">buddenbaum@arm64-01:~$ sudo microk8s add-node</a>
</li>
<li>
<a href="#dbuddenbaum-arm64-05-sudo-usermod-a-g-microk8s-dbuddenbaum">dbuddenbaum@arm64-05:~$ sudo usermod -a -G microk8s dbuddenbaum</a>
</li>
<li>
<a href="#dbuddenbaum-arm64-05-sudo-chown-f-r-dbuddenbaum-kubesudo-chown-f-r-dbuddenbaum-kube">dbuddenbaum@arm64-05:~$ sudo chown -f -R dbuddenbaum ~/.kubesudo chown -f -R dbuddenbaum ~/.kube</a>
</li>
<li>
<a href="#dbuddenbaum-arm64-05-newgrp-microk8s">#### dbuddenbaum@arm64-05:~$ newgrp microk8s</a>
</li>
<li>
<a href="#dbuddenbaum-arm64-05-microk8s-join-192-168-2-51-25000-64fd2ec74c48cdd2d113805beead7a28-307234781a84-worker">dbuddenbaum@arm64-05:~$ microk8s join 192.168.2.51:25000/64fd2ec74c48cdd2d113805beead7a28/307234781a84 –worker</a>
</li>
<li>
<a href="#dbuddenbaum-arm64-01-microk8s-config-config">dbuddenbaum@arm64-01:~$ microk8s config &gt; config</a>
</li>
</ul>
</li>
<li>
<a href="#cluster">Cluster</a>
<ul>
<li>
<a href="#dbuddenbaum-amd64-03-microk8s-enable-dns">dbuddenbaum@amd64-03:~$ microk8s enable dns</a>
</li>
<li>
<a href="#dbuddenbaum-amd64-03-microk8s-enable-dashboard">dbuddenbaum@amd64-03:~$ microk8s enable dashboard</a>
</li>
<li>
<a href="#04-09-24-9-43pm-donbuddenbaum-donbs-imac">#( 04/09/24@ 9:43PM )( donbuddenbaum@donbs-imac ):~</a>
</li>
<li>
<a href="#dbuddenbaum-amd64-03-microk8s-enable-ingress">dbuddenbaum@amd64-03:~$ microk8s enable ingress</a>
</li>
<li>
<a href="#dbuddenbaum-amd64-03-microk8s-enable-metallb">dbuddenbaum@amd64-03:~$ microk8s enable metallb</a>
</li>
<li>
<a href="#dbuddenbaum-amd64-03-microk8s-enable-observability">dbuddenbaum@amd64-03:~$ microk8s enable observability</a>
</li>
</ul>
</li>
<li>
<a href="#dashboard">Dashboard</a>
<ul>
<li>
<a href="#02-18-24-3-04pm-donbuddenbaum-donbs-imac-documents-kalaxy2-yaml-microk8s-k8s-dashboard-main">#( 02/18/24@ 3:04PM )( donbuddenbaum@donbs-imac ):~/Documents/Kalaxy2/yaml/microk8s/k8s-dashboard@main✗✗✗</a>
</li>
<li>
<a href="#02-18-24-3-04pm-donbuddenbaum-donbs-imac-documents-kalaxy2-yaml-microk8s-k8s-dashboard-main-1">#( 02/18/24@ 3:04PM )( donbuddenbaum@donbs-imac ):~/Documents/Kalaxy2/yaml/microk8s/k8s-dashboard@main✗✗✗</a>
</li>
<li>
<a href="#token-with-duration">Token with Duration</a>
<ul>
<li>
<a href="#02-18-24-3-13pm-donbuddenbaum-donbs-imac-documents-kalaxy2-yaml-microk8s-k8s-dashboard-main">#( 02/18/24@ 3:13PM )( donbuddenbaum@donbs-imac ):~/Documents/Kalaxy2/yaml/microk8s/k8s-dashboard@main✗✗✗</a>
</li>
</ul>
</li>
<li>
<a href="#02-18-24-3-13pm-donbuddenbaum-donbs-imac-documents-kalaxy2-yaml-microk8s-k8s-dashboard-main-1">#( 02/18/24@ 3:13PM )( donbuddenbaum@donbs-imac ):~/Documents/Kalaxy2/yaml/microk8s/k8s-dashboard@main✗✗✗</a>
</li>
</ul>
</li>
<li>
<a href="#observability">Observability</a>
<ul>
<li>
<a href="#dbuddenbaum-arm64-01-microk8s-enable-prometheus">dbuddenbaum@arm64-01:~$ microk8s enable prometheus</a>
</li>
</ul>
</li>
<li>
<a href="#grafana">Grafana</a>
<ul>
<li>
<a href="#02-20-24-6-54pm-donbuddenbaum-donbs-imac-documents-kalaxy2-main">#( 02/20/24@ 6:54PM )( donbuddenbaum@donbs-imac ):~/Documents/Kalaxy2@main✗✗✗</a>
</li>
<li>
<a href="#02-20-24-6-56pm-donbuddenbaum-donbs-imac-documents-kalaxy2-main">#( 02/20/24@ 6:56PM )( donbuddenbaum@donbs-imac ):~/Documents/Kalaxy2@main✗✗✗</a>
</li>
<li>
<a href="#02-20-24-7-47pm-donbuddenbaum-donbs-imac-documents-kalaxy2-yaml-microk8s-prometheus-main">#( 02/20/24@ 7:47PM )( donbuddenbaum@donbs-imac ):~/Documents/Kalaxy2/yaml/microk8s/prometheus@main✗✗✗</a>
</li>
</ul>
</li>
<li>
<a href="#config-for-kubectl">Config for Kubectl</a>
<ul>
<li>
<a href="#dbuddenbaum-arm64-01-kube">dbuddenbaum@arm64-01:~/.kube$</a>
</li>
<li>
<a href="#02-29-24-7-05pm-donbuddenbaum-donbs-imac-kube">#( 02/29/24@ 7:05PM )( donbuddenbaum@donbs-imac ):~/.kube</a>
</li>
<li>
<a href="#02-29-24-7-05pm-donbuddenbaum-donbs-imac-kube-1">#( 02/29/24@ 7:05PM )( donbuddenbaum@donbs-imac ):~/.kube</a>
</li>
<li>
<a href="#05-07-24-2-32pm-donbuddenbaum-donbs-imac">#( 05/07/24@ 2:32PM )( donbuddenbaum@donbs-imac ):~</a>
</li>
</ul>
</li>
<li>
<a href="#gpu">GPU</a>
<ul>
<li>
<a href="#08-22-24-13-17-35-dbuddenbaum-amd64-01-microk8s-enable-nvidia">(08/22/24@13:17:35)dbuddenbaum@amd64-01:~$ microk8s enable nvidia</a>
</li>
<li>
<a href="#08-22-24-1-23pm-donbuddenbaum-donbs-imac-documents-kalaxy2-yaml-gpu-main">#( 08/22/24@ 1:23PM )( donbuddenbaum@donbs-imac ):~/Documents/Kalaxy2/yaml/gpu@main✗✗✗</a>
</li>
<li>
<a href="#08-22-24-1-26pm-donbuddenbaum-donbs-imac-documents-kalaxy2-yaml-gpu-main">#( 08/22/24@ 1:26PM )( donbuddenbaum@donbs-imac ):~/Documents/Kalaxy2/yaml/gpu@main✗✗✗</a>
</li>
<li>
<a href="#08-22-24-1-29pm-donbuddenbaum-donbs-imac-documents-kalaxy2-yaml-gpu-main">#( 08/22/24@ 1:29PM )( donbuddenbaum@donbs-imac ):~/Documents/Kalaxy2/yaml/gpu@main✗✗✗</a>
</li>
<li>
<a href="#08-22-24-1-30pm-donbuddenbaum-donbs-imac-documents-kalaxy2-yaml-gpu-main">#( 08/22/24@ 1:30PM )( donbuddenbaum@donbs-imac ):~/Documents/Kalaxy2/yaml/gpu@main✗✗✗</a>
</li>
</ul>
</li>
<li>
<a href="#setup-amd64-nvidia-gpu">Setup AMD64 Nvidia GPU</a>
<ul>
<li>
<a href="#08-22-24-13-32-08-dbuddenbaum-amd64-01-inxi-g">(08/22/24@13:32:08)dbuddenbaum@amd64-01:~$ inxi -G</a>
</li>
<li>
<a href="#dbuddenbaum-amd64-02-sudo-snap-install-nvtop">dbuddenbaum@amd64-02:~$ sudo snap install nvtop</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<a href="#remove-node">Remove Node</a>
<ul>
<li>
<a href="#08-26-24-12-00-28-dbuddenbaum-arm64-02-microk8s-leave">(08/26/24@12:00:28)dbuddenbaum@arm64-02:~$ microk8s leave</a>
</li>
<li>
<a href="#08-26-24-12-02-49-dbuddenbaum-amd64-01-microk8s-remove-node-arm64-01">(08/26/24@12:02:49)dbuddenbaum@amd64-01:~$ microk8s remove-node arm64-01</a>
</li>
</ul>
</li>
<li>
<a href="#remove-microk8s">Remove Microk8s</a>
<ul>
<li>
<a href="#08-26-24-12-10-43-dbuddenbaum-arm64-02-sudo-snap-remove-microk8s">(08/26/24@12:10:43)dbuddenbaum@arm64-02:~$ sudo snap remove microk8s</a>
</li>
<li>
<a href="#08-26-24-12-12-11-dbuddenbaum-arm64-02-sudo-rm-rf-var-snap-microk8s">(08/26/24@12:12:11)dbuddenbaum@arm64-02:~$ sudo rm -rf /var/snap/microk8s/</a>
</li>
<li>
<a href="#08-26-24-12-13-06-dbuddenbaum-arm64-02-sudo-rm-rf-var-snap-microk8s-common">(08/26/24@12:13:06)dbuddenbaum@arm64-02:~$ sudo rm -rf /var/snap/microk8s-common/</a>
</li>
<li>
<a href="#08-26-24-12-13-07-dbuddenbaum-arm64-02-ps-aux-grep-microk8s">(08/26/24@12:13:07)dbuddenbaum@arm64-02:~$ ps aux | grep microk8s</a>
</li>
<li>
<a href="#08-26-24-12-13-21-dbuddenbaum-arm64-02-sudo-rm-rf-etc-kubernetes">(08/26/24@12:13:21)dbuddenbaum@arm64-02:~$ sudo rm -rf /etc/kubernetes/</a>
</li>
</ul>
</li>
<li>
<a href="#rejoin-the-cluster">Rejoin the cluster</a>
<ul>
<li>
<a href="#08-26-24-12-19-30-dbuddenbaum-arm64-02-sudo-snap-install-microk8s-classic-channel-1-29-stable">(08/26/24@12:19:30)dbuddenbaum@arm64-02:~$ sudo snap install microk8s –classic –channel=1.29/stable</a>
</li>
<li>
<a href="#08-26-24-12-21-45-dbuddenbaum-arm64-02-microk8s-join-192-168-2-61-25000-21738774876b9de75538fae2501f8c4f-a888dd82d6b2">(08/26/24@12:21:45)dbuddenbaum@arm64-02:~$ microk8s join 192.168.2.61:25000/21738774876b9de75538fae2501f8c4f/a888dd82d6b2</a>
</li>
</ul>
</li>
<li>
<a href="#dqlite-repair">Dqlite Repair</a>
<ul>
<li>
<a href="#08-26-24-14-45-52-dbuddenbaum-arm64-01-microk8s-join-192-168-2-61-25000-xxxxxxx">(08/26/24@14:45:52)dbuddenbaum@arm64-01:~$ microk8s join 192.168.2.61:25000/xxxxxxx…..</a>
</li>
<li>
<a href="#08-26-24-14-52-00-dbuddenbaum-amd64-01-sudo-snap-microk8s-current-bin-dqlite-s-file-var-snap-microk8s-current-var-kubernetes-backend-cluster-yaml-c-var-snap-microk8s-current-var-kubernetes-backend-cluster-crt-k-var-snap-microk8s-current-var-kubernetes-bac">(08/26/24@14:52:00)dbuddenbaum@amd64-01:~$ sudo /snap/microk8s/current/bin/dqlite -s file:///var/snap/microk8s/current/var/kubernetes/backend/cluster.yaml -c /var/snap/microk8s/current/var/kubernetes/backend/cluster.crt -k /var/snap/microk8s/current/var/kubernetes/backend/cluster.key -f json k8s “.remove 192.168.2.51:19001”</a>
</li>
<li>
<a href="#08-26-24-14-52-25-dbuddenbaum-amd64-01-var-snap-microk8s-current-var-kubernetes-backend-vi-cluster-yaml">(08/26/24@14:52:25)dbuddenbaum@amd64-01:/var/snap/microk8s/current/var/kubernetes/backend$ vi cluster.yaml</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>    </div>
</div>
<h1><a id="setup-microk8s" href="#setup-microk8s" class="Permalink" aria-hidden="true" title="Permalink">#</a>Setup MicroK8s</h1>
<h2><a id="reference" href="#reference" class="Permalink" aria-hidden="true" title="Permalink">#</a>Reference</h2>
<ul>
<li>
<a href="https://nuculabs.dev/p/how-to-create-a-servicemonitor-in-microk8s-observability-tutorial" class="Link--external" rel="noopener noreferrer">How to create a ServiceMonitor in Microk8s: Observability Tutorial</a>
</li>
</ul>
<h2><a id="setup" href="#setup" class="Permalink" aria-hidden="true" title="Permalink">#</a>Setup</h2>
<h3><a id="arm64-init" href="#arm64-init" class="Permalink" aria-hidden="true" title="Permalink">#</a>ARM64 Init</h3>
<h4><a id="02-17-24-10-43pm-donbuddenbaum-donbs-imac-documents-kalaxy2-cloud-init-setup-main" href="#02-17-24-10-43pm-donbuddenbaum-donbs-imac-documents-kalaxy2-cloud-init-setup-main" class="Permalink" aria-hidden="true" title="Permalink">#</a>#( 02/17/24@10:43PM )( donbuddenbaum@donbs-imac ):~/Documents/Kalaxy2/cloud-init-setup@main✔</h4>
<p>flash –userdata cloud-config-4.yml ~/Downloads/RPI-USB-BOOT.img</p>
<pre><code>Is /dev/disk2 correct? y
Unmounting /dev/disk2 ...
Unmount of all volumes on disk2 was successful
Unmount of all volumes on disk2 was successful
Flashing /Users/donbuddenbaum/Downloads/RPI-USB-BOOT.img to /dev/rdisk2 ...
Password:
3.03GiB 0:01:30 [34.3MiB/s] [=======================================================================================================================================================================================================================================================================================================================&gt;] 100%
0+49604 records in
3100+1 records out
3250806272 bytes transferred in 77.088032 secs (42170051 bytes/sec)
Mounting Disk
Mounting /dev/disk2 to customize...
Copying cloud-init cloud-config-4.yml to /Volumes/system-boot/user-data ...
Unmounting /dev/disk2 ...
&quot;disk2&quot; ejected.
Finished.
</code></pre>
<h3><a id="node" href="#node" class="Permalink" aria-hidden="true" title="Permalink">#</a>Node</h3>
<h4><a id="pi-arm64-05-sudo-passwd-dbuddenbaum" href="#pi-arm64-05-sudo-passwd-dbuddenbaum" class="Permalink" aria-hidden="true" title="Permalink">#</a>pi@arm64-05:~$ sudo passwd dbuddenbaum</h4>
<pre><code>New password:
Retype new password:
passwd: password updated successfully
</code></pre>
<h4><a id="02-18-24-1-00am-donbuddenbaum-donbs-imac-documents-kalaxy2-cloud-init-setup-main" href="#02-18-24-1-00am-donbuddenbaum-donbs-imac-documents-kalaxy2-cloud-init-setup-main" class="Permalink" aria-hidden="true" title="Permalink">#</a>#( 02/18/24@ 1:00AM )( donbuddenbaum@donbs-imac ):~/Documents/Kalaxy2/cloud-init-setup@main✗✗✗</h4>
<p>ssh-copy-id <a href="mailto:dbuddenbaum@192.168.2.54" class="Link--external" rel="noopener noreferrer">dbuddenbaum@192.168.2.54</a></p>
<pre><code>/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: &quot;/Users/donbuddenbaum/.ssh/id_rsa.pub&quot;
/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed
/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys
dbuddenbaum@192.168.2.54's password:

Number of key(s) added:        1

Now try logging into the machine, with:   &quot;ssh 'dbuddenbaum@192.168.2.54'&quot;
and check to make sure that only the key(s) you wanted were added.##
</code></pre>
<h4><a id="dbuddenbaum-donb-ms7821-ssh-keygen-f-home-dbuddenbaum-ssh-known-hosts-r-192-168-2-51" href="#dbuddenbaum-donb-ms7821-ssh-keygen-f-home-dbuddenbaum-ssh-known-hosts-r-192-168-2-51" class="Permalink" aria-hidden="true" title="Permalink">#</a>dbuddenbaum@donb-ms7821:~$ ssh-keygen -f “/home/dbuddenbaum/.ssh/known_hosts” -R “192.168.2.51”</h4>
<pre><code># Host 192.168.2.51 found: line 2
/home/dbuddenbaum/.ssh/known_hosts updated.
Original contents retained as /home/dbuddenbaum/.ssh/known_hosts.old
</code></pre>
<h4><a id="dbuddenbaum-arm64-05-sudo-snap-install-microk8s-classic-channel-1-29-stable" href="#dbuddenbaum-arm64-05-sudo-snap-install-microk8s-classic-channel-1-29-stable" class="Permalink" aria-hidden="true" title="Permalink">#</a>dbuddenbaum@arm64-05:~$ sudo snap install microk8s –classic –channel=1.29/stable</h4>
<pre><code>microk8s (1.29/stable) v1.29.0 from Canonical✓ installed
</code></pre>
<h4><a id="buddenbaum-arm64-01-sudo-microk8s-add-node" href="#buddenbaum-arm64-01-sudo-microk8s-add-node" class="Permalink" aria-hidden="true" title="Permalink">#</a>buddenbaum@arm64-01:~$ sudo microk8s add-node</h4>
<pre><code>From the node you wish to join to this cluster, run the following:
microk8s join 192.168.2.51:25000/64fd2ec74c48cdd2d113805beead7a28/307234781a84

Use the '--worker' flag to join a node as a worker not running the control plane, eg:
microk8s join 192.168.2.51:25000/64fd2ec74c48cdd2d113805beead7a28/307234781a84 --worker

If the node you are adding is not reachable through the default interface you can use one of the following:
microk8s join 192.168.2.51:25000/64fd2ec74c48cdd2d113805beead7a28/307234781a84
microk8s join 2603:6081:1e00:1075:dea6:32ff:febb:c8bf:25000/64fd2ec74c48cdd2d113805beead7a28/307234781a84
</code></pre>
<h4><a id="dbuddenbaum-arm64-05-sudo-usermod-a-g-microk8s-dbuddenbaum" href="#dbuddenbaum-arm64-05-sudo-usermod-a-g-microk8s-dbuddenbaum" class="Permalink" aria-hidden="true" title="Permalink">#</a>dbuddenbaum@arm64-05:~$ sudo usermod -a -G microk8s dbuddenbaum</h4>
<h4><a id="dbuddenbaum-arm64-05-sudo-chown-f-r-dbuddenbaum-kubesudo-chown-f-r-dbuddenbaum-kube" href="#dbuddenbaum-arm64-05-sudo-chown-f-r-dbuddenbaum-kubesudo-chown-f-r-dbuddenbaum-kube" class="Permalink" aria-hidden="true" title="Permalink">#</a>dbuddenbaum@arm64-05:~$ sudo chown -f -R dbuddenbaum ~/.kubesudo chown -f -R dbuddenbaum ~/.kube</h4>
<h4><a id="dbuddenbaum-arm64-05-newgrp-microk8s" href="#dbuddenbaum-arm64-05-newgrp-microk8s" class="Permalink" aria-hidden="true" title="Permalink">#</a>#### dbuddenbaum@arm64-05:~$ newgrp microk8s</h4>
<h4><a id="dbuddenbaum-arm64-05-microk8s-join-192-168-2-51-25000-64fd2ec74c48cdd2d113805beead7a28-307234781a84-worker" href="#dbuddenbaum-arm64-05-microk8s-join-192-168-2-51-25000-64fd2ec74c48cdd2d113805beead7a28-307234781a84-worker" class="Permalink" aria-hidden="true" title="Permalink">#</a>dbuddenbaum@arm64-05:~$ microk8s join 192.168.2.51:25000/64fd2ec74c48cdd2d113805beead7a28/307234781a84 –worker</h4>
<pre><code>Contacting cluster at 192.168.2.51

The node has joined the cluster and will appear in the nodes list in a few seconds.

This worker node gets automatically configured with the API server endpoints.
If the API servers are behind a loadbalancer please set the '--refresh-interval' to '0s' in:
/var/snap/microk8s/current/args/apiserver-proxy
and replace the API server endpoints with the one provided by the loadbalancer in:
/var/snap/microk8s/current/args/traefik/provider.yaml

Successfully joined the cluster.
</code></pre>
<h4><a id="dbuddenbaum-arm64-01-microk8s-config-config" href="#dbuddenbaum-arm64-01-microk8s-config-config" class="Permalink" aria-hidden="true" title="Permalink">#</a>dbuddenbaum@arm64-01:~$ microk8s config &gt; config</h4>
<pre><code>cd .kube
rsync dbuddenbaum@amd64-03:~/.kube/config config
</code></pre>
<h3><a id="cluster" href="#cluster" class="Permalink" aria-hidden="true" title="Permalink">#</a>Cluster</h3>
<h4><a id="dbuddenbaum-amd64-03-microk8s-enable-dns" href="#dbuddenbaum-amd64-03-microk8s-enable-dns" class="Permalink" aria-hidden="true" title="Permalink">#</a>dbuddenbaum@amd64-03:~$ microk8s enable dns</h4>
<pre><code>Infer repository core for addon dns
Addon core/dns is already enabled
</code></pre>
<h4><a id="dbuddenbaum-amd64-03-microk8s-enable-dashboard" href="#dbuddenbaum-amd64-03-microk8s-enable-dashboard" class="Permalink" aria-hidden="true" title="Permalink">#</a>dbuddenbaum@amd64-03:~$ microk8s enable dashboard</h4>
<pre><code>Infer repository core for addon dashboard
Enabling Kubernetes Dashboard
Infer repository core for addon metrics-server
Enabling Metrics-Server
serviceaccount/metrics-server created
clusterrole.rbac.authorization.k8s.io/system:aggregated-metrics-reader created
clusterrole.rbac.authorization.k8s.io/system:metrics-server created
rolebinding.rbac.authorization.k8s.io/metrics-server-auth-reader created
clusterrolebinding.rbac.authorization.k8s.io/metrics-server:system:auth-delegator created
clusterrolebinding.rbac.authorization.k8s.io/system:metrics-server created
service/metrics-server created
deployment.apps/metrics-server created
apiservice.apiregistration.k8s.io/v1beta1.metrics.k8s.io created
clusterrolebinding.rbac.authorization.k8s.io/microk8s-admin created
Adding argument --authentication-token-webhook to nodes.
Metrics-Server is enabled
Applying manifest
serviceaccount/kubernetes-dashboard created
service/kubernetes-dashboard created
secret/kubernetes-dashboard-certs created
secret/kubernetes-dashboard-csrf created
secret/kubernetes-dashboard-key-holder created
configmap/kubernetes-dashboard-settings created
role.rbac.authorization.k8s.io/kubernetes-dashboard created
clusterrole.rbac.authorization.k8s.io/kubernetes-dashboard created
rolebinding.rbac.authorization.k8s.io/kubernetes-dashboard created
clusterrolebinding.rbac.authorization.k8s.io/kubernetes-dashboard created
deployment.apps/kubernetes-dashboard created
service/dashboard-metrics-scraper created
deployment.apps/dashboard-metrics-scraper created
secret/microk8s-dashboard-token created

If RBAC is not enabled access the dashboard using the token retrieved with:

microk8s kubectl describe secret -n kube-system microk8s-dashboard-token

Use this token in the https login UI of the kubernetes-dashboard service.

In an RBAC enabled setup (microk8s enable RBAC) you need to create a user with restricted
permissions as shown in:
https://github.com/kubernetes/dashboard/blob/master/docs/user/access-control/creating-sample-user.md
</code></pre>
<h4><a id="04-09-24-9-43pm-donbuddenbaum-donbs-imac" href="#04-09-24-9-43pm-donbuddenbaum-donbs-imac" class="Permalink" aria-hidden="true" title="Permalink">#</a>#( 04/09/24@ 9:43PM )( donbuddenbaum@donbs-imac ):~</h4>
<p>kubectl patch –namespace kube-system deployment <br />
kubernetes-dashboard –type=‘json’ –patch <br />
‘[{“op”: “add”, “path”: “/spec/template/spec/containers/0/args/2”, “value”: “–token-ttl=43200” }]’</p>
<pre><code>deployment.apps/kubernetes-dashboard patched
</code></pre>
<h4><a id="dbuddenbaum-amd64-03-microk8s-enable-ingress" href="#dbuddenbaum-amd64-03-microk8s-enable-ingress" class="Permalink" aria-hidden="true" title="Permalink">#</a>dbuddenbaum@amd64-03:~$ microk8s enable ingress</h4>
<pre><code>Infer repository core for addon ingress
Enabling Ingress
ingressclass.networking.k8s.io/public created
ingressclass.networking.k8s.io/nginx created
namespace/ingress created
serviceaccount/nginx-ingress-microk8s-serviceaccount created
clusterrole.rbac.authorization.k8s.io/nginx-ingress-microk8s-clusterrole created
role.rbac.authorization.k8s.io/nginx-ingress-microk8s-role created
clusterrolebinding.rbac.authorization.k8s.io/nginx-ingress-microk8s created
rolebinding.rbac.authorization.k8s.io/nginx-ingress-microk8s created
configmap/nginx-load-balancer-microk8s-conf created
configmap/nginx-ingress-tcp-microk8s-conf created
configmap/nginx-ingress-udp-microk8s-conf created
daemonset.apps/nginx-ingress-microk8s-controller created
Ingress is enabled
</code></pre>
<h4><a id="dbuddenbaum-amd64-03-microk8s-enable-metallb" href="#dbuddenbaum-amd64-03-microk8s-enable-metallb" class="Permalink" aria-hidden="true" title="Permalink">#</a>dbuddenbaum@amd64-03:~$ microk8s enable metallb</h4>
<pre><code class="language-Infer">Enabling MetalLB
Enter each IP address range delimited by comma (e.g. '10.64.140.43-10.64.140.49,192.168.0.105-192.168.0.111'): 192.168.2.20-192.168.2.49
Applying Metallb manifest
customresourcedefinition.apiextensions.k8s.io/addresspools.metallb.io created
customresourcedefinition.apiextensions.k8s.io/bfdprofiles.metallb.io created
customresourcedefinition.apiextensions.k8s.io/bgpadvertisements.metallb.io created
customresourcedefinition.apiextensions.k8s.io/bgppeers.metallb.io created
customresourcedefinition.apiextensions.k8s.io/communities.metallb.io created
customresourcedefinition.apiextensions.k8s.io/ipaddresspools.metallb.io created
customresourcedefinition.apiextensions.k8s.io/l2advertisements.metallb.io created
namespace/metallb-system created
serviceaccount/controller created
serviceaccount/speaker created
clusterrole.rbac.authorization.k8s.io/metallb-system:controller created
clusterrole.rbac.authorization.k8s.io/metallb-system:speaker created
role.rbac.authorization.k8s.io/controller created
role.rbac.authorization.k8s.io/pod-lister created
clusterrolebinding.rbac.authorization.k8s.io/metallb-system:controller created
clusterrolebinding.rbac.authorization.k8s.io/metallb-system:speaker created
rolebinding.rbac.authorization.k8s.io/controller created
secret/webhook-server-cert created
service/webhook-service created
rolebinding.rbac.authorization.k8s.io/pod-lister created
daemonset.apps/speaker created
deployment.apps/controller created
validatingwebhookconfiguration.admissionregistration.k8s.io/validating-webhook-configuration created
Waiting for Metallb controller to be ready.
error: timed out waiting for the condition on deployments/controller
MetalLB controller is still not ready
deployment.apps/controller condition met
ipaddresspool.metallb.io/default-addresspool created
l2advertisement.metallb.io/default-advertise-all-pools created
MetalLB is enabled
dbuddenbaum@amd64-03:~$ microk8s enable helm3
Infer repository core for addon helm3
Addon core/helm3 is already enabled
</code></pre>
<h4><a id="dbuddenbaum-amd64-03-microk8s-enable-observability" href="#dbuddenbaum-amd64-03-microk8s-enable-observability" class="Permalink" aria-hidden="true" title="Permalink">#</a>dbuddenbaum@amd64-03:~$ microk8s enable observability</h4>
<pre><code>Infer repository core for addon observability
Addon core/dns is already enabled
Addon core/helm3 is already enabled
Enabling default storage class.
WARNING: Hostpath storage is not suitable for production environments.
         A hostpath volume can grow beyond the size limit set in the volume claim manifest.

deployment.apps/hostpath-provisioner created
storageclass.storage.k8s.io/microk8s-hostpath created
serviceaccount/microk8s-hostpath created
clusterrole.rbac.authorization.k8s.io/microk8s-hostpath created
clusterrolebinding.rbac.authorization.k8s.io/microk8s-hostpath created
Storage will be available soon.
Enabling observability
Release &quot;kube-prom-stack&quot; does not exist. Installing it now.
NAME: kube-prom-stack
LAST DEPLOYED: Fri Mar  8 19:55:55 2024
NAMESPACE: observability
STATUS: deployed
REVISION: 1
NOTES:
kube-prometheus-stack has been installed. Check its status by running:
  kubectl --namespace observability get pods -l &quot;release=kube-prom-stack&quot;

Visit https://github.com/prometheus-operator/kube-prometheus for instructions on how to create &amp; configure Alertmanager and Prometheus instances using the Operator.
Release &quot;loki&quot; does not exist. Installing it now.
NAME: loki
LAST DEPLOYED: Fri Mar  8 19:56:53 2024
NAMESPACE: observability
STATUS: deployed
REVISION: 1
NOTES:
The Loki stack has been deployed to your cluster. Loki can now be added as a datasource in Grafana.

See http://docs.grafana.org/features/datasources/loki/ for more detail.
Release &quot;tempo&quot; does not exist. Installing it now.
NAME: tempo
LAST DEPLOYED: Fri Mar  8 19:56:56 2024
NAMESPACE: observability
STATUS: deployed
REVISION: 1
TEST SUITE: None
Adding argument --authentication-kubeconfig to nodes.
Adding argument --authorization-kubeconfig to nodes.
Restarting nodes.
Adding argument --authentication-kubeconfig to nodes.
Adding argument --authorization-kubeconfig to nodes.
Restarting nodes.
The connection to the server 127.0.0.1:16443 was refused - did you specify the right host or port?
Failed to list nodes (try 1): Command '['/snap/microk8s/6641/microk8s-kubectl.wrapper', 'get', 'node', '-o', 'json']' returned non-zero exit status 1.
Adding argument --metrics-bind-address to nodes.
Restarting nodes.
The connection to the server 127.0.0.1:16443 was refused - did you specify the right host or port?
Failed to list nodes (try 1): Command '['/snap/microk8s/6641/microk8s-kubectl.wrapper', 'get', 'node', '-o', 'json']' returned non-zero exit status 1.

Note: the observability stack is setup to monitor only the current nodes of the MicroK8s cluster.
For any nodes joining the cluster at a later stage this addon will need to be set up again.

Observability has been enabled (user/pass: admin/prom-operator)
</code></pre>
<h3><a id="dashboard" href="#dashboard" class="Permalink" aria-hidden="true" title="Permalink">#</a>Dashboard</h3>
<h4><a id="02-18-24-3-04pm-donbuddenbaum-donbs-imac-documents-kalaxy2-yaml-microk8s-k8s-dashboard-main" href="#02-18-24-3-04pm-donbuddenbaum-donbs-imac-documents-kalaxy2-yaml-microk8s-k8s-dashboard-main" class="Permalink" aria-hidden="true" title="Permalink">#</a>#( 02/18/24@ 3:04PM )( donbuddenbaum@donbs-imac ):~/Documents/Kalaxy2/yaml/microk8s/k8s-dashboard@main✗✗✗</h4>
<p>kubectl apply -f k8s-dashboard-adminuser.yaml</p>
<pre><code>serviceaccount/admin-user created
clusterrolebinding.rbac.authorization.k8s.io/admin-user created
</code></pre>
<h4><a id="02-18-24-3-04pm-donbuddenbaum-donbs-imac-documents-kalaxy2-yaml-microk8s-k8s-dashboard-main-1" href="#02-18-24-3-04pm-donbuddenbaum-donbs-imac-documents-kalaxy2-yaml-microk8s-k8s-dashboard-main-1" class="Permalink" aria-hidden="true" title="Permalink">#</a>#( 02/18/24@ 3:04PM )( donbuddenbaum@donbs-imac ):~/Documents/Kalaxy2/yaml/microk8s/k8s-dashboard@main✗✗✗</h4>
<p>kubectl apply -f k8s-dashboard-lb-svc.yaml</p>
<pre><code>service/k8s-dashboard created
</code></pre>
<h4><a id="token-with-duration" href="#token-with-duration" class="Permalink" aria-hidden="true" title="Permalink">#</a>Token with Duration</h4>
<h5><a id="02-18-24-3-13pm-donbuddenbaum-donbs-imac-documents-kalaxy2-yaml-microk8s-k8s-dashboard-main" href="#02-18-24-3-13pm-donbuddenbaum-donbs-imac-documents-kalaxy2-yaml-microk8s-k8s-dashboard-main" class="Permalink" aria-hidden="true" title="Permalink">#</a>#( 02/18/24@ 3:13PM )( donbuddenbaum@donbs-imac ):~/Documents/Kalaxy2/yaml/microk8s/k8s-dashboard@main✗✗✗</h5>
<p>kubectl -n kube-system create token admin-user –duration=720h</p>
<pre><code>😀
</code></pre>
<h4><a id="02-18-24-3-13pm-donbuddenbaum-donbs-imac-documents-kalaxy2-yaml-microk8s-k8s-dashboard-main-1" href="#02-18-24-3-13pm-donbuddenbaum-donbs-imac-documents-kalaxy2-yaml-microk8s-k8s-dashboard-main-1" class="Permalink" aria-hidden="true" title="Permalink">#</a>#( 02/18/24@ 3:13PM )( donbuddenbaum@donbs-imac ):~/Documents/Kalaxy2/yaml/microk8s/k8s-dashboard@main✗✗✗</h4>
<p>kubectl get service -n kube-system</p>
<pre><code>NAME                        TYPE           CLUSTER-IP       EXTERNAL-IP    PORT(S)                  AGE
kube-dns                    ClusterIP      10.152.183.10    &lt;none&gt;         53/UDP,53/TCP,9153/TCP   17h
metrics-server              ClusterIP      10.152.183.50    &lt;none&gt;         443/TCP                  14h
kubernetes-dashboard        ClusterIP      10.152.183.91    &lt;none&gt;         443/TCP                  14h
dashboard-metrics-scraper   ClusterIP      10.152.183.147   &lt;none&gt;         8000/TCP                 14h
k8s-dashboard               LoadBalancer   10.152.183.90    192.168.2.20   443:30545/TCP            21m
</code></pre>
<p><a href="https://blinkeye.github.io/post/public/2019-05-30-kubernetes-dashboard/" class="Link--external" rel="noopener noreferrer">Kubernetes Dashboard Adjusting the timeout of the Kubernetes Dashboard</a></p>
<pre><code>kubectl patch --namespace kubernetes-dashboard deployment \
  kubernetes-dashboard --type='json' --patch \
 '[{&quot;op&quot;: &quot;add&quot;, &quot;path&quot;: &quot;/spec/template/spec/containers/0/args/2&quot;, &quot;value&quot;: &quot;--token-ttl=43200&quot; }]'
</code></pre>
<p>or</p>
<p><img src="../images/kubernetes_dashboard_ttl.png" alt="kubernetes-dashboard-ttl.png" /></p>
<p><img src="../images/kubernetes_dashboard_args.png" alt="kubernetes-dashboard-args.png" /></p>
<h3><a id="observability" href="#observability" class="Permalink" aria-hidden="true" title="Permalink">#</a>Observability</h3>
<h4><a id="dbuddenbaum-arm64-01-microk8s-enable-prometheus" href="#dbuddenbaum-arm64-01-microk8s-enable-prometheus" class="Permalink" aria-hidden="true" title="Permalink">#</a>dbuddenbaum@arm64-01:~$ microk8s enable prometheus</h4>
<pre><code>Infer repository core for addon prometheus
DEPRECATION WARNING: 'prometheus' is deprecated and will soon be removed. Please use 'observability' instead.

Infer repository core for addon observability
Addon core/dns is already enabled
Addon core/helm3 is already enabled
Enabling default storage class.
WARNING: Hostpath storage is not suitable for production environments.
         A hostpath volume can grow beyond the size limit set in the volume claim manifest.

deployment.apps/hostpath-provisioner created
storageclass.storage.k8s.io/microk8s-hostpath created
serviceaccount/microk8s-hostpath created
clusterrole.rbac.authorization.k8s.io/microk8s-hostpath created
clusterrolebinding.rbac.authorization.k8s.io/microk8s-hostpath created
Storage will be available soon.
Enabling observability
Release &quot;kube-prom-stack&quot; does not exist. Installing it now.
NAME: kube-prom-stack
LAST DEPLOYED: Sun Feb 18 18:11:07 2024
NAMESPACE: observability
STATUS: deployed
REVISION: 1
NOTES:
kube-prometheus-stack has been installed. Check its status by running:
  kubectl --namespace observability get pods -l &quot;release=kube-prom-stack&quot;

Visit https://github.com/prometheus-operator/kube-prometheus for instructions on how to create &amp; configure Alertmanager and Prometheus instances using the Operator.
Release &quot;loki&quot; does not exist. Installing it now.
NAME: loki
LAST DEPLOYED: Sun Feb 18 18:12:34 2024
NAMESPACE: observability
STATUS: deployed
REVISION: 1
NOTES:
The Loki stack has been deployed to your cluster. Loki can now be added as a datasource in Grafana.

See http://docs.grafana.org/features/datasources/loki/ for more detail.
Release &quot;tempo&quot; does not exist. Installing it now.
NAME: tempo
LAST DEPLOYED: Sun Feb 18 18:12:40 2024
NAMESPACE: observability
STATUS: deployed
REVISION: 1
TEST SUITE: None
Adding argument --authentication-kubeconfig to nodes.
Adding argument --authorization-kubeconfig to nodes.
Restarting nodes.
The connection to the server 127.0.0.1:16443 was refused - did you specify the right host or port?
Failed to list nodes (try 1): Command '['/snap/microk8s/6357/microk8s-kubectl.wrapper', 'get', 'node', '-o', 'json']' returned non-zero exit status 1.
Adding argument --authentication-kubeconfig to nodes.
Adding argument --authorization-kubeconfig to nodes.
Restarting nodes.
The connection to the server 127.0.0.1:16443 was refused - did you specify the right host or port?
Failed to list nodes (try 1): Command '['/snap/microk8s/6357/microk8s-kubectl.wrapper', 'get', 'node', '-o', 'json']' returned non-zero exit status 1.
Adding argument --metrics-bind-address to nodes.
Restarting nodes.
The connection to the server 127.0.0.1:16443 was refused - did you specify the right host or port?
Failed to list nodes (try 1): Command '['/snap/microk8s/6357/microk8s-kubectl.wrapper', 'get', 'node', '-o', 'json']' returned non-zero exit status 1.

Note: the observability stack is setup to monitor only the current nodes of the MicroK8s cluster.
For any nodes joining the cluster at a later stage this addon will need to be set up again.
</code></pre>
<p>Observability has been enabled <strong>(user/pass: admin/prom-operator)</strong></p>
<h3><a id="grafana" href="#grafana" class="Permalink" aria-hidden="true" title="Permalink">#</a>Grafana</h3>
<h4><a id="02-20-24-6-54pm-donbuddenbaum-donbs-imac-documents-kalaxy2-main" href="#02-20-24-6-54pm-donbuddenbaum-donbs-imac-documents-kalaxy2-main" class="Permalink" aria-hidden="true" title="Permalink">#</a>#( 02/20/24@ 6:54PM )( donbuddenbaum@donbs-imac ):~/Documents/Kalaxy2@main✗✗✗</h4>
<p>kubectl get deployment -n observability</p>
<pre><code>NAME                                  READY   UP-TO-DATE   AVAILABLE   AGE
kube-prom-stack-kube-prome-operator   1/1     1            1           2d
kube-prom-stack-kube-state-metrics    1/1     1            1           2d
kube-prom-stack-grafana               1/1     1            1           2d
</code></pre>
<h4><a id="02-20-24-6-56pm-donbuddenbaum-donbs-imac-documents-kalaxy2-main" href="#02-20-24-6-56pm-donbuddenbaum-donbs-imac-documents-kalaxy2-main" class="Permalink" aria-hidden="true" title="Permalink">#</a>#( 02/20/24@ 6:56PM )( donbuddenbaum@donbs-imac ):~/Documents/Kalaxy2@main✗✗✗</h4>
<p>kubectl port-forward deployment/kube-prom-stack-grafana -n observability 3000</p>
<pre><code>Forwarding from 127.0.0.1:3000 -&gt; 3000
Forwarding from [::1]:3000 -&gt; 3000
</code></pre>
<p>or for loadbalancer</p>
<h4><a id="02-20-24-7-47pm-donbuddenbaum-donbs-imac-documents-kalaxy2-yaml-microk8s-prometheus-main" href="#02-20-24-7-47pm-donbuddenbaum-donbs-imac-documents-kalaxy2-yaml-microk8s-prometheus-main" class="Permalink" aria-hidden="true" title="Permalink">#</a>#( 02/20/24@ 7:47PM )( donbuddenbaum@donbs-imac ):~/Documents/Kalaxy2/yaml/microk8s/prometheus@main✗✗✗</h4>
<p>kubectl apply -f grafana-lb-svc.yaml</p>
<pre><code>service/grafana-dashboard configured
</code></pre>
<h3><a id="config-for-kubectl" href="#config-for-kubectl" class="Permalink" aria-hidden="true" title="Permalink">#</a>Config for Kubectl</h3>
<h4><a id="dbuddenbaum-arm64-01-kube" href="#dbuddenbaum-arm64-01-kube" class="Permalink" aria-hidden="true" title="Permalink">#</a>dbuddenbaum@arm64-01:~/.kube$</h4>
<p>microk8s config &gt; config</p>
<h4><a id="02-29-24-7-05pm-donbuddenbaum-donbs-imac-kube" href="#02-29-24-7-05pm-donbuddenbaum-donbs-imac-kube" class="Permalink" aria-hidden="true" title="Permalink">#</a>#( 02/29/24@ 7:05PM )( donbuddenbaum@donbs-imac ):~/.kube</h4>
<p>rsync dbuddenbaum@arm64-01:~/.kube/config config</p>
<h4><a id="02-29-24-7-05pm-donbuddenbaum-donbs-imac-kube-1" href="#02-29-24-7-05pm-donbuddenbaum-donbs-imac-kube-1" class="Permalink" aria-hidden="true" title="Permalink">#</a>#( 02/29/24@ 7:05PM )( donbuddenbaum@donbs-imac ):~/.kube</h4>
<p>ls</p>
<pre><code>Untitled.pdf           config.ha              config.k8s.rpi4.old
cache                  config.imac            config.rpi4.opensource
config                 config.k8s             http-cache
</code></pre>
<h4><a id="05-07-24-2-32pm-donbuddenbaum-donbs-imac" href="#05-07-24-2-32pm-donbuddenbaum-donbs-imac" class="Permalink" aria-hidden="true" title="Permalink">#</a>#( 05/07/24@ 2:32PM )( donbuddenbaum@donbs-imac ):~</h4>
<p>rsync -azP dbuddenbaum@arm64-05:~/.kube/config ~/.kube/config</p>
<pre><code>receiving file list ...
1 file to consider
config
        5462 100%    5.21MB/s    0:00:00 (xfer#1, to-check=0/1)

sent 38 bytes  received 3676 bytes  1061.14 bytes/sec
total size is 5462  speedup is 1.47
</code></pre>
<h3><a id="gpu" href="#gpu" class="Permalink" aria-hidden="true" title="Permalink">#</a>GPU</h3>
<h4><a id="08-22-24-13-17-35-dbuddenbaum-amd64-01-microk8s-enable-nvidia" href="#08-22-24-13-17-35-dbuddenbaum-amd64-01-microk8s-enable-nvidia" class="Permalink" aria-hidden="true" title="Permalink">#</a>(08/22/24@13:17:35)dbuddenbaum@amd64-01:~$ microk8s enable nvidia</h4>
<pre><code>Infer repository core for addon nvidia
Addon core/dns is already enabled
Addon core/helm3 is already enabled
Checking if NVIDIA driver is already installed
GPU 0: NVIDIA GeForce GTX 1070 (UUID: GPU-171e0276-e06a-e32f-2f3b-bd32e8253763)
&quot;nvidia&quot; has been added to your repositories
Hang tight while we grab the latest from your chart repositories...
...Successfully got an update from the &quot;nvidia&quot; chart repository
Update Complete. ⎈Happy Helming!⎈
Deploy NVIDIA GPU operator
Using host GPU driver
NAME: gpu-operator
LAST DEPLOYED: Thu Aug 22 13:18:13 2024
NAMESPACE: gpu-operator-resources
STATUS: deployed
REVISION: 1
TEST SUITE: None
Deployed NVIDIA GPU operator
</code></pre>
<h4><a id="08-22-24-1-23pm-donbuddenbaum-donbs-imac-documents-kalaxy2-yaml-gpu-main" href="#08-22-24-1-23pm-donbuddenbaum-donbs-imac-documents-kalaxy2-yaml-gpu-main" class="Permalink" aria-hidden="true" title="Permalink">#</a>#( 08/22/24@ 1:23PM )( donbuddenbaum@donbs-imac ):~/Documents/Kalaxy2/yaml/gpu@main✗✗✗</h4>
<p>kubectl apply -f gpu-test-job-medium.yaml</p>
<pre><code>pod/gpu-test-job-medium created
</code></pre>
<h4><a id="08-22-24-1-26pm-donbuddenbaum-donbs-imac-documents-kalaxy2-yaml-gpu-main" href="#08-22-24-1-26pm-donbuddenbaum-donbs-imac-documents-kalaxy2-yaml-gpu-main" class="Permalink" aria-hidden="true" title="Permalink">#</a>#( 08/22/24@ 1:26PM )( donbuddenbaum@donbs-imac ):~/Documents/Kalaxy2/yaml/gpu@main✗✗✗</h4>
<p>kubectl logs pod/gpu-test-job-medium</p>
<pre><code>[Vector addition of 50000 elements]
Copy input data from the host memory to the CUDA device
CUDA kernel launch with 196 blocks of 256 threads
Copy output data from the CUDA device to the host memory
Test PASSED
Done
</code></pre>
<h4><a id="08-22-24-1-29pm-donbuddenbaum-donbs-imac-documents-kalaxy2-yaml-gpu-main" href="#08-22-24-1-29pm-donbuddenbaum-donbs-imac-documents-kalaxy2-yaml-gpu-main" class="Permalink" aria-hidden="true" title="Permalink">#</a>#( 08/22/24@ 1:29PM )( donbuddenbaum@donbs-imac ):~/Documents/Kalaxy2/yaml/gpu@main✗✗✗</h4>
<pre><code> kubectl apply -f gpu-test-job-high.yaml
</code></pre>
<p>pod/gpu-test-job-high created</p>
<h4><a id="08-22-24-1-30pm-donbuddenbaum-donbs-imac-documents-kalaxy2-yaml-gpu-main" href="#08-22-24-1-30pm-donbuddenbaum-donbs-imac-documents-kalaxy2-yaml-gpu-main" class="Permalink" aria-hidden="true" title="Permalink">#</a>#( 08/22/24@ 1:30PM )( donbuddenbaum@donbs-imac ):~/Documents/Kalaxy2/yaml/gpu@main✗✗✗</h4>
<p>kubectl logs pod/gpu-test-job-high</p>
<pre><code>[Vector addition of 50000 elements]
Copy input data from the host memory to the CUDA device
CUDA kernel launch with 196 blocks of 256 threads
Copy output data from the CUDA device to the host memory
Test PASSED
Done
</code></pre>
<h3><a id="setup-amd64-nvidia-gpu" href="#setup-amd64-nvidia-gpu" class="Permalink" aria-hidden="true" title="Permalink">#</a>Setup AMD64 Nvidia GPU</h3>
<ul>
<li>
<a href="../generativeAI/gpu.html">MicroK8s enable GPU</a>
</li>
</ul>
<h4><a id="08-22-24-13-32-08-dbuddenbaum-amd64-01-inxi-g" href="#08-22-24-13-32-08-dbuddenbaum-amd64-01-inxi-g" class="Permalink" aria-hidden="true" title="Permalink">#</a>(08/22/24@13:32:08)dbuddenbaum@amd64-01:~$ inxi -G</h4>
<pre><code>Graphics:
  Device-1: NVIDIA GP104 [GeForce GTX 1070] driver: nvidia v: 535.183.01
  Display: server: X.org v: 1.21.1.11 with: Xwayland v: 23.2.6 driver: X:
    loaded: modesetting,nouveau,nvidia unloaded: fbdev,vesa gpu: nvidia,nvidia-nvswitch tty: 133x66
    resolution: 1: 2560x1440
  API: EGL v: 1.5 drivers: nvidia,swrast platforms: surfaceless,device
  API: OpenGL v: 4.6.0 compat-v: 4.5 vendor: mesa v: 24.0.9-0ubuntu0.1
    note: console (EGL sourced) renderer: NVIDIA GeForce GTX 1070/PCIe/SSE2, llvmpipe (LLVM 17.0.6
    256 bits)
</code></pre>
<h4><a id="dbuddenbaum-amd64-02-sudo-snap-install-nvtop" href="#dbuddenbaum-amd64-02-sudo-snap-install-nvtop" class="Permalink" aria-hidden="true" title="Permalink">#</a>dbuddenbaum@amd64-02:~$ sudo snap install nvtop</h4>
<p>[sudo] password for dbuddenbaum:</p>
<pre><code>  nvtop 3.1.0 from Maxime Schmitt (razortealeaf) installed
</code></pre>
<h2><a id="remove-node" href="#remove-node" class="Permalink" aria-hidden="true" title="Permalink">#</a>Remove Node</h2>
<h3><a id="08-26-24-12-00-28-dbuddenbaum-arm64-02-microk8s-leave" href="#08-26-24-12-00-28-dbuddenbaum-arm64-02-microk8s-leave" class="Permalink" aria-hidden="true" title="Permalink">#</a>(08/26/24@12:00:28)dbuddenbaum@arm64-02:~$ microk8s leave</h3>
<pre><code>  Generating new cluster certificates.
  Waiting for node to start. .
</code></pre>
<h3><a id="08-26-24-12-02-49-dbuddenbaum-amd64-01-microk8s-remove-node-arm64-01" href="#08-26-24-12-02-49-dbuddenbaum-amd64-01-microk8s-remove-node-arm64-01" class="Permalink" aria-hidden="true" title="Permalink">#</a>(08/26/24@12:02:49)dbuddenbaum@amd64-01:~$ microk8s remove-node arm64-01</h3>
<h2><a id="remove-microk8s" href="#remove-microk8s" class="Permalink" aria-hidden="true" title="Permalink">#</a>Remove Microk8s</h2>
<h3><a id="08-26-24-12-10-43-dbuddenbaum-arm64-02-sudo-snap-remove-microk8s" href="#08-26-24-12-10-43-dbuddenbaum-arm64-02-sudo-snap-remove-microk8s" class="Permalink" aria-hidden="true" title="Permalink">#</a>(08/26/24@12:10:43)dbuddenbaum@arm64-02:~$ sudo snap remove microk8s</h3>
<pre><code>  microk8s removed
</code></pre>
<h3><a id="08-26-24-12-12-11-dbuddenbaum-arm64-02-sudo-rm-rf-var-snap-microk8s" href="#08-26-24-12-12-11-dbuddenbaum-arm64-02-sudo-rm-rf-var-snap-microk8s" class="Permalink" aria-hidden="true" title="Permalink">#</a>(08/26/24@12:12:11)dbuddenbaum@arm64-02:~$ sudo rm -rf /var/snap/microk8s/</h3>
<h3><a id="08-26-24-12-13-06-dbuddenbaum-arm64-02-sudo-rm-rf-var-snap-microk8s-common" href="#08-26-24-12-13-06-dbuddenbaum-arm64-02-sudo-rm-rf-var-snap-microk8s-common" class="Permalink" aria-hidden="true" title="Permalink">#</a>(08/26/24@12:13:06)dbuddenbaum@arm64-02:~$ sudo rm -rf /var/snap/microk8s-common/</h3>
<h3><a id="08-26-24-12-13-07-dbuddenbaum-arm64-02-ps-aux-grep-microk8s" href="#08-26-24-12-13-07-dbuddenbaum-arm64-02-ps-aux-grep-microk8s" class="Permalink" aria-hidden="true" title="Permalink">#</a>(08/26/24@12:13:07)dbuddenbaum@arm64-02:~$ ps aux | grep microk8s</h3>
<pre><code>  dbudden+  461338  0.0  0.0   5968   668 pts/0    S+   12:13   0:00 grep --color=auto microk8s
</code></pre>
<h3><a id="08-26-24-12-13-21-dbuddenbaum-arm64-02-sudo-rm-rf-etc-kubernetes" href="#08-26-24-12-13-21-dbuddenbaum-arm64-02-sudo-rm-rf-etc-kubernetes" class="Permalink" aria-hidden="true" title="Permalink">#</a>(08/26/24@12:13:21)dbuddenbaum@arm64-02:~$ sudo rm -rf /etc/kubernetes/</h3>
<h2><a id="rejoin-the-cluster" href="#rejoin-the-cluster" class="Permalink" aria-hidden="true" title="Permalink">#</a>Rejoin the cluster</h2>
<h3><a id="08-26-24-12-19-30-dbuddenbaum-arm64-02-sudo-snap-install-microk8s-classic-channel-1-29-stable" href="#08-26-24-12-19-30-dbuddenbaum-arm64-02-sudo-snap-install-microk8s-classic-channel-1-29-stable" class="Permalink" aria-hidden="true" title="Permalink">#</a>(08/26/24@12:19:30)dbuddenbaum@arm64-02:~$ sudo snap install microk8s –classic –channel=1.29/stable</h3>
<pre><code>  microk8s (1.29/stable) v1.29.8 from Canonical✓ installed
</code></pre>
<h3><a id="08-26-24-12-21-45-dbuddenbaum-arm64-02-microk8s-join-192-168-2-61-25000-21738774876b9de75538fae2501f8c4f-a888dd82d6b2" href="#08-26-24-12-21-45-dbuddenbaum-arm64-02-microk8s-join-192-168-2-61-25000-21738774876b9de75538fae2501f8c4f-a888dd82d6b2" class="Permalink" aria-hidden="true" title="Permalink">#</a>(08/26/24@12:21:45)dbuddenbaum@arm64-02:~$ microk8s join 192.168.2.61:25000/21738774876b9de75538fae2501f8c4f/a888dd82d6b2</h3>
<pre><code>Contacting cluster at 192.168.2.61
Waiting for this node to finish joining the cluster. .. .. .. ..
Successfully joined the cluster.
</code></pre>
<h2><a id="dqlite-repair" href="#dqlite-repair" class="Permalink" aria-hidden="true" title="Permalink">#</a>Dqlite Repair</h2>
<h3><a id="08-26-24-14-45-52-dbuddenbaum-arm64-01-microk8s-join-192-168-2-61-25000-xxxxxxx" href="#08-26-24-14-45-52-dbuddenbaum-arm64-01-microk8s-join-192-168-2-61-25000-xxxxxxx" class="Permalink" aria-hidden="true" title="Permalink">#</a>(08/26/24@14:45:52)dbuddenbaum@arm64-01:~$ microk8s join 192.168.2.61:25000/xxxxxxx…..</h3>
<pre><code>Contacting cluster at 192.168.2.61
Connection failed. Failed to retrieve dqlite cluster nodes: the joining node (192.168.2.51) is already known to dqlite (500).
</code></pre>
<h3><a id="08-26-24-14-52-00-dbuddenbaum-amd64-01-sudo-snap-microk8s-current-bin-dqlite-s-file-var-snap-microk8s-current-var-kubernetes-backend-cluster-yaml-c-var-snap-microk8s-current-var-kubernetes-backend-cluster-crt-k-var-snap-microk8s-current-var-kubernetes-bac" href="#08-26-24-14-52-00-dbuddenbaum-amd64-01-sudo-snap-microk8s-current-bin-dqlite-s-file-var-snap-microk8s-current-var-kubernetes-backend-cluster-yaml-c-var-snap-microk8s-current-var-kubernetes-backend-cluster-crt-k-var-snap-microk8s-current-var-kubernetes-bac" class="Permalink" aria-hidden="true" title="Permalink">#</a>(08/26/24@14:52:00)dbuddenbaum@amd64-01:~$ sudo /snap/microk8s/current/bin/dqlite -s file:///var/snap/microk8s/current/var/kubernetes/backend/cluster.yaml -c /var/snap/microk8s/current/var/kubernetes/backend/cluster.crt -k /var/snap/microk8s/current/var/kubernetes/backend/cluster.key -f json k8s “.remove 192.168.2.51:19001”</h3>
<h3><a id="08-26-24-14-52-25-dbuddenbaum-amd64-01-var-snap-microk8s-current-var-kubernetes-backend-vi-cluster-yaml" href="#08-26-24-14-52-25-dbuddenbaum-amd64-01-var-snap-microk8s-current-var-kubernetes-backend-vi-cluster-yaml" class="Permalink" aria-hidden="true" title="Permalink">#</a>(08/26/24@14:52:25)dbuddenbaum@amd64-01:/var/snap/microk8s/current/var/kubernetes/backend$ vi cluster.yaml</h3>
    </div>

        <nav>
        <ul class="Pager">
            <li class=Pager--prev><a href="../setup/argocd/argocd.html">Previous</a></li>            <li class=Pager--next><a href="../setup/minio.html">Next</a></li>        </ul>
    </nav>
    </article>

            </div>
        </div>
    </div>
</div>

    
    <!-- JS -->
            <script src="../themes/daux/js/main.mjs"></script>
    
        <script>
        
        window.searchLanguage = "";
        window.searchTranslation = {"Search_one_result":"1 result","Search_results":"!count results","Search_no_results":"Nothing found","Search_common_words_ignored":"Common words are largely ignored","Search_too_short":"Search too short","Search_one_character_or_more":"Should be one character or more","Search_should_be_x_or_more":"Should be !min characters or more","Link_previous":"Previous","Link_next":"Next"};
    </script>

    <!-- Search -->
    <script type="text/javascript" src="../daux_libraries/search.min.js"></script>

    <script>
        window.search({'base_url': '../'})
    </script>
</body>
</html>
